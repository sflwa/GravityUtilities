var GFPGFU_AdminMenuBar;String.prototype.format||(String.prototype.format=function(){var t=arguments;return this.replace(/{(\d+)}/g,function(e,i){return"undefined"!=typeof t[i]?t[i]:e})}),function(t){GFPGFU_AdminMenuBar={init:!1,target:"#wp-admin-bar-root-default",counter:0,schema:!1,form:!1,add_menu:function(t){this.schema||(this.schema=JSON.parse(gfpgfu_adminmenubar_vars.schema)),this.form=t,this.counter++,this.build_form_menu()},build_form_menu:function(){var t=this.create_top_menu(),e="gfpgfu-adminmenubar-"+this.form.schema+"-form-"+this.form.form_id,i=this.get_edit_url(),a=this.get_title(e);if(Object.keys(this.schema).length>1){var r=this.create_sub_menu(e,i,a);t.append(r);for(var n in this.schema){var m=this.schema[n].url.indexOf("{0}")<=-1?this.schema[n].url:this.schema[n].url.format(this.form.form_id),u=this.schema[n].label;r.find("ul").append(this.create_menu_item(e+n,m,u))}}else t.append(this.create_menu_item(e,i,a))},get_title:function(e){return this.form.title?this.form.title:(t.ajax({url:gfpgfu_adminmenubar_vars.ajax_url,data:{action:"gfpgfu_adminmenubar_get_title",form_id:this.form.form_id},type:"get",dataType:"json",success:function(i){i.form_title&&t("#wp-admin-bar-"+e).find("a:first").text(i.form_title)}}),"Edit Form "+this.counter)},get_edit_url:function(){return this.schema.edit&&this.schema.edit.url?this.schema.edit.url.indexOf("{0}")<=-1?this.schema.edit.url:this.schema.edit.url.format(this.form.form_id):"#"},create_top_menu:function(){var e="gfpgfu-adminmenubar",i=t("#wp-admin-bar-"+e+"-default");return i.length?i:(t(this.target).append(this.create_sub_menu(e,"#","Edit Forms")),t("#wp-admin-bar-"+e+"-default"))},create_sub_menu:function(e,i,a){var r=t('<li id="wp-admin-bar-'+e+'" class="menupop" />'),n=t('<a class="ab-item" aria-haspopup="true" href="'+i+'" />').html(a),m=t('<div class="ab-sub-wrapper" />'),u=t('<ul id="wp-admin-bar-'+e+'-default" class="ab-submenu" />');return m.append(u),r.append(n),r.append(m),r},create_menu_item:function(e,i,a){var r=t('<li id="wp-admin-bar-'+e+'" />'),n=t('<a class="ab-item" href="'+i+'" />').text(a);return r.append(n),r}},GFPGFU_AdminMenuBar.init||(GFPGFU_AdminMenuBar.init=function(){t(document).bind("gform_post_render",function(t,e){GFPGFU_AdminMenuBar.add_menu({form_id:e})})},GFPGFU_AdminMenuBar.init())}(jQuery);