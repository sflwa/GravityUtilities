function gfp_gfutil_toggle_create_page(e){e.preventDefault(),resetNewUtilityPageModal(),loadNewUtilityPageModal()}function loadNewUtilityPageModal(){return jQuery("body").addClass("gfpgf-utility"),resetNewUtilityPageModal(),tb_show("Create a New Page","#TB_inline?width=500&amp;inlineId=gfp_gfutil_create_page_modal"),jQuery("#new_page_title").focus(),!1}function handleNewUtilityPageSubmission(e){e.preventDefault(),saveNewPage()}jQuery(document).ready(function(e){e(".gfp_gfutil_create-page-button_link").on("click",gfp_gfutil_toggle_create_page),e(".gfp_gfutil_create-page-for-form_link").on("click",function(){resetNewUtilityPageModal(),loadNewUtilityPageModal()}),e(document).on("submit","#gfp_gfutil_create_page_modal_form",function(e){handleNewUtilityPageSubmission(e)})});async function saveNewPage(){var e=jQuery("#new_page_title").val();if(""===e||"undefined"===e)return jQuery("#gfp_gfutility-error").html("<p>Please add a title to your page.</p>"),addUtilityInputErrorIcon("#new_page_title"),!1;e=jQuery("#save_new_page_utility");jQuery(".setting-row").hide(),jQuery("#save_new_page_utility").hide();e=new gfp_gf_util_AjaxSpinner(e,gfp_gfutil_create_page_for_form_strings.spinner,"","Creating Page...");jQuery("#gfp_gfutility-error").html("");return await postData(jQuery("#new_page_title").val(),"yes"===gfp_gfutil_create_page_for_form_strings.editor_support?'\x3c!-- wp:gravityforms/form {"formId":"'+gfp_gfutil_create_page_for_form_strings.form_id+'"} /--\x3e':'[gravityform id="'+gfp_gfutil_create_page_for_form_strings.form_id+'" title="true" ]',e)}function postData(e,t,r){return jQuery.post({url:gfp_gfutil_create_page_for_form_strings.root+"wp/v2/pages",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",gfp_gfutil_create_page_for_form_strings.nonce)},data:{title:e,status:"publish",content:t}}).then(function(e){jQuery(".gfutility-ajaxspinner").html('Page created successfully. <a target="_blank" href="'+e.guid.rendered+'">View page</a>')}).fail(function(e,t,i){return jQuery("#gfp_gfutility-error").html("<p>Something went wrong with saving</p>"),jQuery(".setting-row").show(),jQuery("#save_new_page_utility").show(),r.destroy(),!1})}function resetNewUtilityPageModal(){jQuery("#new_page_title").val(""),jQuery("#gfp_gfutility-error").html(""),jQuery(".setting-row").show(),jQuery(".gfutility-ajaxspinner").remove(),jQuery("#save_new_page_utility").show(),removeUtilityInputErrorIcons(".gfp_gfutil_create_page_modal_container")}function addUtilityInputErrorIcon(e){(e=jQuery(e)).before('<span class="gf_input_error_icon"></span>')}function removeUtilityInputErrorIcons(e){(e=jQuery(e)).find("span.gf_input_error_icon").remove()}function gfp_gf_util_AjaxSpinner(e,t,i,r){t=void 0===t?"/images/ajax-loader.gif":t,i=void 0!==i?i:"";return this.elem=e,this.image='<div class="gfutility-ajaxspinner" style="text-align:center;"><img class="gfspinner" src="'+t+'" style="'+i+'" /> &nbsp; <label>'+r+"</label></div>",this.init=function(){return this.spinner=jQuery(this.image),jQuery(this.elem).after(this.spinner),this},this.destroy=function(){jQuery(this.spinner).remove()},this.init()}